test-clj-unit:
  name: Run cljs unit tests
  run_when:
    any branch has been updated:
      type: branch
      include_match: ^.*$
  context:
    task_defaults:
      git_options:
        submodules:
          include_match: ^.*$
      traits:
        - asdf
      scripts:
        test:
          body: |
            #!/usr/bin/env bash
            set -euo pipefail
            ./bin/lein test $CIDER_CI_TASK_FILE
    generate_tasks:
      include_match: src/test/.*.clj

